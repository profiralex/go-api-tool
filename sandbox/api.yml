endpoints:
  ######################################
  # USERS
  ######################################
  - path: /users
    method: POST
    response: User
    body_fields:
      - { name: email, type: string, validators: "required|email" }
      - { name: username, type: string, validators: "min:5|max:255" }
      - { name: password, type: string, validators: "required|password" }

  - path: /users/{uuid}
    method: GET
    response: User

  - path: /users/{uuid}
    method: PATCH
    response: User
    body_fields:
      - { name: username, type: string, validators: "min:5|max:255" }
      - { name: password, type: string, validators: "password" }

  ######################################
  # NOTES
  ######################################
  - path: /users/{uuid}/notes
    method: GET
    response: "[]Note"

  - path: /users/{uuid}/notes
    method: POST
    response: Note
    body_fields:
      - { name: name, type: string, validators: "required,min:1|max:255" }
      - { name: content, type: string, validators: "min:1|max:65000" }

  - path: /users/{uuid}/notes/{uuid}
    method: GET
    response: Note

  - path: /users/{uuid}/notes/{uuid}
    method: PATCH
    response: Note
    body_fields:
      - { name: name, type: string, validators: "min:1|max:255" }
      - { name: content, type: string, validators: "min:1|max:65000" }

  - path: /users/{uuid}/notes/{uuid}
    method: DELETE
    response: bool

  ######################################
  # TASKS
  ######################################
  - path: /users/{uuid}/tasks
    method: GET
    response: "[]Task"

  - path: /users/{uuid}/notes/{uuid}/tasks
    method: POST
    response: Task
    body_fields:
      - { name: name, type: string, validators: "required,min:1|max:255" }
      - { name: content, type: string, validators: "min:1|max:65000" }

  - path: /users/{uuid}/tasks/{uuid}
    method: GET
    response: Task

  - path: /users/{uuid}/tasks/{uuid}
    method: PATCH
    response: Task
    body_fields:
      - { name: name, type: string, validators: "min:1|max:255" }
      - { name: content, type: string, validators: "min:1|max:65000" }

  - path: /users/{uuid}/tasks/{uuid}
    method: DELETE
    response: bool

models:
  - name: User
    fields:
      - { name: Id, type: int64, tags: hidden, constraints: "primary_key,auto_increment" }
      - { name: Uuid, type: string, db: uuid, constraints: unique }
      - { name: Username, type: string, constraints: unique }
      - { name: Email, type: string, tags: gdpr, constraints: unique }
      - { name: Password, type: string, tags: hidden }

  - name: Note
    fields:
      - { name: Id, type: int64, tags: hidden, constraints: "primary_key,auto_increment" }
      - { name: Uuid, type: string, constraints: unique }
      - { name: UserID, type: string, constraints: "foreign_key:User:ID" }
      - { name: Name, type: string, tags:"gdpr" }
      - { name: Content, type: string, tags:"gdpr", constraints: "type:text" }

  - name: Task
    fields:
      - { name: Id, type: int64, tags: hidden, constraints: "primary_key,auto_increment" }
      - { name: Uuid, type: string, constraints: unique }
      - { name: UserID, type: string, constraints: "foreign_key:User:ID" }
      - { name: NoteID, type: string, constraints: "foreign_key:Note:ID" }
      - { name: Name, type: string, tags:"gdpr" }
      - { name: Content, type: string, tags:"gdpr", constraints: "type:text" }
      - { name: Done, type: bool }


