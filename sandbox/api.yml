endpoints:
  ######################################
  # USERS
  ######################################
  - path: /users
    method: POST
    response: User
    body_fields:
      - { name: email, type: string, validators: [ "required", "email" ] }
      - { name: username, type: string, validators: [ "min:5","max:255" ] }
      - { name: password, type: string, validators: [ "required","password" ] }

  - path: /users/{uuid}
    method: GET
    response: User

  - path: /users/{uuid}
    method: PATCH
    response: User
    body_fields:
      - { name: username, type: string, validators: [ "min:5","max:255" ] }
      - { name: password, type: string, validators: [ "password" ] }

  ######################################
  # NOTES
  ######################################
  - path: /users/{uuid}/notes
    method: GET
    response: "[]Note"

  - path: /users/{uuid}/notes
    method: POST
    response: Note
    body_fields:
      - { name: name, type: string, validators: [ "required", "min:1","max:255" ] }
      - { name: content, type: string, validators: [ "min:1","max:65000" ] }

  - path: /users/{uuid}/notes/{uuid}
    method: GET
    response: Note

  - path: /users/{uuid}/notes/{uuid}
    method: PATCH
    response: Note
    body_fields:
      - { name: name, type: string, validators: [ "min:1","max:255" ] }
      - { name: content, type: string, validators: [ "min:1","max:65000" ] }

  - path: /users/{uuid}/notes/{uuid}
    method: DELETE
    response: bool

  ######################################
  # TASKS
  ######################################
  - path: /users/{uuid}/tasks
    method: GET
    response: "[]Task"

  - path: /users/{uuid}/notes/{uuid}/tasks
    method: POST
    response: Task
    body_fields:
      - { name: name, type: string, validators: [ "required", "min:1","max:255" ] }
      - { name: content, type: string, validators: [ "min:1","max:65000" ] }

  - path: /users/{uuid}/tasks/{uuid}
    method: GET
    response: Task

  - path: /users/{uuid}/tasks/{uuid}
    method: PATCH
    response: Task
    body_fields:
      - { name: name, type: string, validators: [ "min:1","max:255" ] }
      - { name: content, type: string, validators: [ "min:1","max:65000" ] }

  - path: /users/{uuid}/tasks/{uuid}
    method: DELETE
    response: bool

models:
  - name: User
    fields:
      - { name: Username, type: string, constraints: [ "unique" ] }
      - { name: Email, type: string, tags: [ "gdpr" ], constraints: [ "unique" ] }
      - { name: Password, type: string, tags: [ "hidden" ] }

  - name: Note
    fields:
      - { name: UserId, type: int64, constraints: [ "foreign_key:User:Id" ] }
      - { name: Name, type: string, tags: [ "gdpr" ] }
      - { name: Content, type: string, tags: [ "gdpr" ], constraints: [ "type:text" ] }

  - name: Task
    fields:
      - { name: UserId, type: int64, constraints: [ "foreign_key:User:Id" ] }
      - { name: NoteId, type: int64, constraints: [ "foreign_key:Note:Id" ] }
      - { name: Name, type: string, tags: [ "gdpr" ] }
      - { name: Content, type: string, tags: [ "gdpr" ], constraints: [ "type:text" ] }
      - { name: Done, type: bool, constraints: [ "default:false" ] }


